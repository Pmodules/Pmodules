#!/usr/bin/env modbuild

pbuild::set_download_url "ftp://ftp.tcl.tk/pub/tcl/tcl8_6/tcl$V-src.tar.gz"
pbuild::install_docfiles 'license.terms' 'README.md'

pbuild::configure() {
	case ${OS} in
	Linux )
		srcdir="${SRC_DIR}/unix"
		;;
	Darwin )
		srcdir="${SRC_DIR}/macosx"
		;;
	esac
	"${srcdir}"/configure \
		--prefix="${PREFIX}" \
		--bindir="${PREFIX}/${UTILBIN_DIR}" \
		--enable-shared=no \
		|| exit 1
}

pbuild::post_install() {
	{ cd "${PREFIX}/${UTILBIN_DIR}" && rm -f tclsh && ln -fs tclsh${V%.*} tclsh; };
}

