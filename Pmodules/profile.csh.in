#!/bin/tcsh

setenv PMODULES_ROOT "/opt/psi"

if ( ! $?PMODULES_VERSION ) then
	setenv PMODULES_VERSION "@PMODULES_VERSION@"
endif
setenv PMODULES_HOME "$PMODULES_ROOT/Tools/Pmodules/$PMODULES_VERSION"
setenv PMODULES_DIR "${PMODULES_HOME}"

setenv PMODULES_CONFIG_DIR 'config'
setenv PMODULES_MODULEFILES_DIR 'modulefiles'
setenv PMODULES_TEMPLATES_DIR 'templates'

setenv PMODULES_DEFAULT_GROUPS 'Tools Programming'
setenv PMODULES_DEFINED_RELEASES ':unstable:stable:deprecated:'
setenv PMODULES_DEFAULT_RELEASES 'stable'

############################################################################
# check configuration
#
if ( ! $?PMODULES_PREFIX ) then 
	echo "Oops: Pmodules prefix not set."
	return 1
endif

if ( "$PMODULES_PREFIX" == "" ) then
	echo "Oops: Pmodules prefix set to empty string!"
endif
if ( ! -d ${PMODULES_PREFIX} ) then 
	echo "Oops: ${PMODULES_PREFIX}: Set as Pmodules prefix, but this is not a directory!"
	return 1
endif

if ( ! $?PMODULES_VERSION ) then
	echo "Oops: Pmodules version not set!"
	return 1
endif
if ( "$PMODULES_VERSION" == "" ) then
	echo "Oops: Pmodules version set to empty string!"
	return 1
endif

if ( $?PMODULES_HOME ) then
	echo "Oops: Pmodules home not set!"
	return 1
endif
if ( "$PMODULES_HOME" == "" ) then
	echo "Oops: Pmodules home set to empty string!"
	return 1
fi
if ( ! -d "$PMODULES_HOME" ) then
	echo "Oops: $PMODULES_HOME: Set as Pmodules home, but this is not a directory!"
	return 1
endif

############################################################################
# inititialize Pmodules for bash
#
set _init_csh="$PMODULES_HOME/init/csh"
if ( ! -r "$_init_csh" ) then
	echo "Oops: cannot initialize Modules!"
	echo "$_init_csh: File does not exist or is not readable."
	return 1
fi
source "$_init_csh"
unset _init_csh

# Local Variables:
# mode: csh
# sh-basic-offset: 8
# tab-width: 8
# End:
