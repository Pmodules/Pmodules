#!/usr/bin/env modbuild

SOURCE_URL="http://frodo.looijaard.name/system/files/software/getopt/getopt-1.1.6.tar.gz"

pbuild::patch_sources_Linux() {
	patch -p1 < "${BUILD_BLOCK_DIR}/Makefile.patch"
}

pbuild::configure() {
	:
}

pbuild::build() {
	declare -x C_INCLUDE_PATH="${PREFIX}/include"
	declare -x LIBRARY_PATH="${PREFIX}/lib"
	case ${OS} in
		Linux )
			declare -x LDFLAGS="-lintl -L${PREFIX}/lib"
			;;
		Darwin )
			declare -x LDFLAGS="-lintl -liconv -framework CoreFoundation"
			;;
	esac

	cd "${MODULE_SRCDIR}"
	make -e
}

pbuild::install() {
	cd "${MODULE_SRCDIR}"
	declare -x DESTDIR="${PREFIX}"
	declare -x prefix=''
	make -e install
}

pbuild::cleanup_build() {
	cd "${MODULE_SRCDIR}"
	make -e realclean
}

pbuild::add_to_group 'Tools'
pbuild::make_all

# Local Variables:
# mode: sh
# sh-basic-offset: 8
# tab-width: 8
# End:
